## 3.3 数据格式

intel的术语

- 字（word）：16位数据类型
- 双字（double words）：32位
- 四字（quad words）：64位



![image](https://ws2.sinaimg.cn/large/005wgNfbly1g73nsmfdttj30jw06gtcn.jpg)





## 3.4 访问信息

![image](https://wx3.sinaimg.cn/large/005wgNfbly1g73np8yflpj30ha0kldx0.jpg)



#### 3.4.1 操作数指示符

大多数指令有一个或者多个操作数（operand），指示出执行一个操作中要使用的源数据值，以及放置结果的目的位置。

![image](https://wx4.sinaimg.cn/large/005wgNfbly1g73oehtgeoj30j0090dna.jpg)

- 立即数（immediate）
- 寄存器（register）
- 内存引用



#### 3.4.2 数据传送指令

MOV类由movb、movw、movl和movq等组成。

MOV (source) (destination)

![image](https://wx3.sinaimg.cn/large/005wgNfbly1g73pk1bchxj30cs05l0ux.jpg)

源操作数指定的值是一个（立即数 | 寄存器 | 内存中），目的操作数指定一个位置（寄存器 | 内存地址）

> x86平台的限制
>
> 在x86平台中，加一个限制，传送指令的两个操作数不能都指向内存位置。将一个值从一个内存位置复制到另一个内存位置需要两条指令——第一条指令将原值加载到寄存器，第二条将该寄存器值写入目的位置



因为有小数据到大数据的传输的需求，所以有两类特殊的数据移动指令。

MOVZ类中的指令把目的中剩余的字节填充为0。

![image](https://ws3.sinaimg.cn/large/005wgNfbly1g73qdrpl1uj30gs05eadi.jpg)

MOVS类中的指令通过符号拓展来填充，把源操作的最高位进行复制。

![image](https://ws4.sinaimg.cn/large/005wgNfbly1g73qgb837lj30i9075td6.jpg)



#### 3.4.4 压入和弹出栈数据

其实就是push和pop啦，在x86-64中，程序栈存放在内存中的某个区域，栈是向下增长的，这样一来，栈顶元素的地址是所有栈中元素地址的最低位。栈指针%rsp保存着栈顶元素的地址。

![image](https://ws4.sinaimg.cn/large/005wgNfbly1g753no7q22j30di04ogno.jpg)

![1568896180254](C:\Users\taojianping\AppData\Roaming\Typora\typora-user-images\1568896180254.png)

![1568896254148](C:\Users\taojianping\AppData\Roaming\Typora\typora-user-images\1568896254148.png)

注意，qushq和popq转成机器码是只要一个字节。